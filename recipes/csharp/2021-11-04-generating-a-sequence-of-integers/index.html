<!DOCTYPE html><html lang="en" mode="light" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="A method for generating a sequence of integers" /><meta property="og:locale" content="en" /><meta name="description" content="0, 1, 2, 3, 4, 5, …, n - 1" /><meta property="og:description" content="0, 1, 2, 3, 4, 5, …, n - 1" /><link rel="canonical" href="https://voidstar.fun/recipes/csharp/2021-11-04-generating-a-sequence-of-integers/" /><meta property="og:url" content="https://voidstar.fun/recipes/csharp/2021-11-04-generating-a-sequence-of-integers/" /><meta property="og:site_name" content="void (*fun)()" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-11-04T16:25:00-07:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="A method for generating a sequence of integers" /><meta name="twitter:site" content="@twitter_username" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"description":"0, 1, 2, 3, 4, 5, …, n - 1","url":"https://voidstar.fun/recipes/csharp/2021-11-04-generating-a-sequence-of-integers/","@type":"BlogPosting","headline":"A method for generating a sequence of integers","dateModified":"2021-11-04T16:25:00-07:00","datePublished":"2021-11-04T16:25:00-07:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://voidstar.fun/recipes/csharp/2021-11-04-generating-a-sequence-of-integers/"},"@context":"https://schema.org"}</script><title>A method for generating a sequence of integers | void (*fun)()</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="void (*fun)()"><meta name="application-name" content="void (*fun)()"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/images/logo.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">void (*fun)()</a></div><div class="site-subtitle font-italic">Learning is polymorphic</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/aldumas" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['voidstar.fun','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>A method for generating a sequence of integers</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>A method for generating a sequence of integers</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Adam Dumas </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Thu, Nov 4, 2021, 4:25 PM -0700" >Nov 4<i class="unloaded">2021-11-04T16:25:00-07:00</i> </span></div><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="507 words">2 min read</span></div></div><div class="post-content"><h2 id="problem">Problem</h2><p>You need the sequence of integers [0, n).</p><h2 id="solution">Solution</h2><div class="language-csharp highlighter-rouge"><div class="code-header"> <span text-data=" C# "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>

<span class="kt">var</span> <span class="n">sequence</span> <span class="p">=</span> <span class="p">(</span><span class="k">new</span> <span class="kt">int</span><span class="p">[</span><span class="n">n</span><span class="p">]).</span><span class="nf">Select</span><span class="p">((</span><span class="n">_</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">i</span><span class="p">);</span>
</pre></table></code></div></div><p>The basic idea is to create an array with the number of elements you need and map each element to its index (ignoring its value). The result is an <a href="https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.ienumerable-1">IEnumerable&lt;int&gt;</a>. If you need the results in an array or list, you can use <a href="https://docs.microsoft.com/en-us/dotnet/api/system.linq.enumerable.toarray">ToArray&lt;int&gt;()</a> or <a href="https://docs.microsoft.com/en-us/dotnet/api/system.linq.enumerable.tolist">ToList&lt;int&gt;()</a>, respectively.</p><p>If you need a different sequence of numbers, you can modify the lambda to transform the index instead of just returning it.</p><p>This solution requires allocating an array of size <code class="language-plaintext highlighter-rouge">n</code>, which takes both memory and processing time (as each element has to be initialized to its default value), so this solution is best used when <code class="language-plaintext highlighter-rouge">n</code> is small. Keep in mind that as long as the object referenced by <code class="language-plaintext highlighter-rouge">sequence</code> is alive, the array is not eligible for garbage collection.</p><iframe width="100%" height="350" src="https://dotnetfiddle.net/Widget/Cak9AC" frameborder="0"></iframe><h3 id="how-it-works">How it works</h3><p>The expression <code class="language-plaintext highlighter-rouge">new int[n]</code> allocations on the heap an array of type <code class="language-plaintext highlighter-rouge">int[]</code> containing <code class="language-plaintext highlighter-rouge">n</code> instances of <code class="language-plaintext highlighter-rouge">int</code>. The parentheses that surround this expression are not needed (see [operator precedence and associativity][operator-precedence]), but I think they improve readability a bit.</p><p><a href="https://docs.microsoft.com/en-us/dotnet/api/system.linq.enumerable.select">Select&lt;TSource, TResult&gt;()</a> creates an object that transforms values of type <code class="language-plaintext highlighter-rouge">TSource</code> into other values of type <code class="language-plaintext highlighter-rouge">TResult</code>, given a delegate that performs the mapping of a single element. Like Python’s <code class="language-plaintext highlighter-rouge">map()</code>, <code class="language-plaintext highlighter-rouge">Select()</code> doesn’t actually do the iteration and mapping; it just returns an object that will perform the mapping as you request the values. You can also compose it with other operations like filtering, grouping, etc.</p><p>We call <code class="language-plaintext highlighter-rouge">Select()</code> on the <code class="language-plaintext highlighter-rouge">int[]</code>, giving it a lambda that returns the index of each item. The <code class="language-plaintext highlighter-rouge">Select()</code> method normally would not be available except that we added the <code class="language-plaintext highlighter-rouge">using System.Linq</code> statement. This brings in a number of extension methods which extend <a href="https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.ienumerable-1">IEnumerable&lt;T&gt;</a>, and arrays qualify because <code class="language-plaintext highlighter-rouge">T[]</code> implements <code class="language-plaintext highlighter-rouge">IEnumerable&lt;T&gt;</code>. When we call <code class="language-plaintext highlighter-rouge">Select&lt;TSource, TResult&gt;()</code> on an <code class="language-plaintext highlighter-rouge">IEnumerable&lt;T&gt;</code>, <code class="language-plaintext highlighter-rouge">TSource</code> gets set to <code class="language-plaintext highlighter-rouge">T</code> which, in our case, is <code class="language-plaintext highlighter-rouge">int</code>. <code class="language-plaintext highlighter-rouge">TResult</code> is determined by the type of the return value of the delegate that is passed into <code class="language-plaintext highlighter-rouge">Select()</code>.</p><p><code class="language-plaintext highlighter-rouge">Select()</code> has an <a href="https://docs.microsoft.com/en-us/dotnet/api/system.linq.enumerable.select?view=net-6.0#System_Linq_Enumerable_Select__2_System_Collections_Generic_IEnumerable___0__System_Func___0_System_Int32___1__">overload</a> which takes a delegate that receives both the current value and the index of that value within the <code class="language-plaintext highlighter-rouge">IEnumerable&lt;T&gt;</code>. The lambda we are passing in, <code class="language-plaintext highlighter-rouge">(_, i) =&gt; i</code>, does nothing with the value and just returns its 2nd argument, the index, which means the return value of the delegate that gets created from this lambda must have the same type as <code class="language-plaintext highlighter-rouge">i</code>. This means <code class="language-plaintext highlighter-rouge">TResult</code> in <code class="language-plaintext highlighter-rouge">Select&lt;TSource, TResult&gt;()</code> must be <code class="language-plaintext highlighter-rouge">int</code> since the <code class="language-plaintext highlighter-rouge">Select()</code> <a href="https://docs.microsoft.com/en-us/dotnet/api/system.linq.enumerable.select?view=net-6.0#System_Linq_Enumerable_Select__2_System_Collections_Generic_IEnumerable___0__System_Func___0_System_Int32___1__">overload</a> requires the 2nd parameter to be <code class="language-plaintext highlighter-rouge">int</code>. The compiler converts the lambda <code class="language-plaintext highlighter-rouge">(_, i) =&gt; i</code> into a delegate of type <a href="https://docs.microsoft.com/en-us/dotnet/api/system.func-3">Func&lt;int, int, int&gt;</a> and also instantiates the overload just mentioned, namely <code class="language-plaintext highlighter-rouge">Select&lt;int, int&gt;(this IEnumerable&lt;int&gt; source, Func&lt;int, int, int&gt; selector)</code>.</p><p>The return value of <code class="language-plaintext highlighter-rouge">Select&lt;int, int&gt;()</code> is an <code class="language-plaintext highlighter-rouge">IEnumerable&lt;int&gt;</code> which you can then iterate over, convert to an array, etc. As each value is requested, its index is returned instead of the value, thereby returning the sequence <code class="language-plaintext highlighter-rouge">[0, n)</code>.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/recipes/'>recipes</a>, <a href='/categories/csharp/'>csharp</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/array/" class="post-tag no-text-decoration" >array</a> <a href="/tags/linq/" class="post-tag no-text-decoration" >linq</a> <a href="/tags/csharp/" class="post-tag no-text-decoration" >csharp</a> <a href="/tags/sequence/" class="post-tag no-text-decoration" >sequence</a> <a href="/tags/range/" class="post-tag no-text-decoration" >range</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=A method for generating a sequence of integers - void (*fun)()&url=https://voidstar.fun/recipes/csharp/2021-11-04-generating-a-sequence-of-integers/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=A method for generating a sequence of integers - void (*fun)()&u=https://voidstar.fun/recipes/csharp/2021-11-04-generating-a-sequence-of-integers/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=A method for generating a sequence of integers - void (*fun)()&url=https://voidstar.fun/recipes/csharp/2021-11-04-generating-a-sequence-of-integers/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/array/">array</a> <a class="post-tag" href="/tags/csharp/">csharp</a> <a class="post-tag" href="/tags/linq/">linq</a> <a class="post-tag" href="/tags/range/">range</a> <a class="post-tag" href="/tags/sequence/">sequence</a></div></div></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div class="post-navigation d-flex justify-content-between"> <span class="btn btn-outline-primary disabled" prompt="Older"><p>-</p></span> <span class="btn btn-outline-primary disabled" prompt="Newer"><p>-</p></span></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2021 <a href="https://github.com/aldumas">Adam Dumas</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/array/">array</a> <a class="post-tag" href="/tags/csharp/">csharp</a> <a class="post-tag" href="/tags/linq/">linq</a> <a class="post-tag" href="/tags/range/">range</a> <a class="post-tag" href="/tags/sequence/">sequence</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script>
